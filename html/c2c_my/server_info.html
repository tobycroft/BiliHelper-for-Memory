<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
        <meta charset="utf-8">
        <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
        <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
        <title>title</title>
        <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
        <link rel="stylesheet" type="text/css" href="../../css/style.css"/>
        <style>
            body {
            }
            .abs {
                background-color: #e74c3c;
            }
            .ass {
                font-size: 25px;
                line-height: 45px;
                font-weight: bold;
                color: #FFF;
                text-align: center;
                width: 97%;
            }
            .ipu {
                width: 97% !important;
                height: 100px;
                background-color: #FFF;
                margin-bottom: 8px !important;
            }
        </style>
    </head>
    <body>
        <header class="aui-bar aui-bar-nav aui-bar-info">
            <a class="aui-pull-left" onclick="closepage()"> <span class="aui-iconfont aui-icon-left"></span> 返回 </a>
            <div class="aui-title">
                服务器信息
            </div>
        </header>
        <div class="aui-aui-content">
            <ul class="aui-list-view">
                <li class="aui-list-view-cell aui-img">
                    <div class="aui-img-body">
                        服务器说明 <p class="aui-ellipsis-4" id="info"></p>
                    </div>
                </li>
            </ul>
        </div>
        <ul class="aui-list-view aui-in">
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-edit aui-bg-info"></i>服务器名称：<span onclick="copy(this)" id="name">name</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-shop aui-bg-success"></i>服务器主：<span onclick="copy(this)" id="username">username</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-shop aui-bg-success"></i>服主QQ：<span onclick="copy(this)" id="qq">qq</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-emoji aui-bg-success"></i>管理员1：<span onclick="copy(this)" id="admin1">admin1</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-emoji aui-bg-success"></i>管理员2：<span onclick="copy(this)" id="admin2">admin2</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-like aui-bg-warning"></i>运行时间：<span onclick="copy(this)" id="time">time</span>分钟
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>是否公开：<span onclick="copy(this)" id="public">public</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>加入审核：<span onclick="copy(this)" id="join_verify">join_verify</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>自动签到：<span onclick="copy(this)" id="autosign">autosign</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>每日签到间隔：<span onclick="copy(this)" id="sign_ratio">sign_ratio</span> 小时
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>应援团签到：<span onclick="copy(this)" id="autoyinyuan">autoyinyuan</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>应援团间隔：<span onclick="copy(this)" id="yinyuan_ratio">yinyuan_ratio</span> 小时
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>瓜子兑换硬币：<span onclick="copy(this)" id="silver2coin">silver2coin</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>硬币兑换间隔：<span onclick="copy(this)" id="silver2coin_delay">silver2coin_delay</span> 小时
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>用户操作间隔：<span onclick="copy(this)" id="user_ratio">user_ratio</span>ms(毫秒)
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>是否抢电视：<span onclick="copy(this)" id="tv">tv</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>电视间隔：<span onclick="copy(this)" id="tv_delay">tv_delay</span>ms(毫秒)
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>APP接口加入活动：<span onclick="copy(this)" id="huodong">huodong</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>APP热点活动间隔：<span onclick="copy(this)" id="huodong_delay">huodong_delay</span>ms(毫秒)
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>PC接口加入活动：<span onclick="copy(this)" id="pchuodong">pchuodong</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>PC热点活动间隔：<span onclick="copy(this)" id="pchuodong_delay">pchuodong_delay</span>ms(毫秒)
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>是否领经验：<span onclick="copy(this)" id="heart">heart</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>经验间隔：<span onclick="copy(this)" id="heart_delay">heart_delay</span>秒
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>是否领瓜子：<span onclick="copy(this)" id="silver">silver</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>领瓜子间隔：<span onclick="copy(this)" id="silver_delay">silver_delay</span>秒
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>随机延迟（重要）：<span onclick="copy(this)" id="auto_standby">auto_standby</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>乱序执行：<span onclick="copy(this)" id="shuffle">shuffle</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>用户间隔随机化：<span onclick="copy(this)" id="auto_delay">auto_delay</span>
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>延迟百分比：<span onclick="copy(this)" id="auto_delay_ratio">auto_delay_ratio</span>%
            </li>
            <li class="aui-list-view-cell">
                <i class="aui-iconfont aui-icon-favor aui-bg-danger"></i>服务器上线时间：<span onclick="copy(this)" id="date">date</span>
            </li>
            <br>
            <div class="aui-form abs">
                <div class="aui-input-row">
                    <i class="aui-input-addon"></i><span class="ass">申请留言(写给服务器主的)</span>
                    <textarea class="aui-input ipu" placeholder="填写加入申请留言可以提高您的通过率哦~" id="message"></textarea>
                </div>
            </div>
            <center>
                <div class="aui-btn aui-btn-info aui-btn-block" onclick="join()" style="width: 90%;margin-top:20px;">
                    <span class="aui-iconfont aui-icon-roundcheck"></span>申请加入该服务器
                </div>
                <!--                <div class="aui-btn aui-btn-info aui-btn-block" onclick="chat()" style="width: 90%;margin-top:20px;">
                <span class="aui-iconfont aui-icon-roundcheck"></span>联系服务器主
                </div>-->
            </center>
            <br>
            <br>
        </ul>
    </body>
</html>
<script src="../../script/api.js"></script>
<script src="../../script/common.js"></script>
<script src="../../script/c2c.js"></script>
<script>
    apiready = function() {
        $api.fixStatusBar($api.dom('header'));
        api.setCustomRefreshHeaderInfo({
            //          loadingImg : 'widget://image/refresh.png',
            bgColor : '#ccc',
            textColor : '#fff',
            textDown : '下拉刷新...',
            textUp : '松开刷新...'
        }, function(ret, err) {
            server_info();
            api.refreshHeaderLoadDone();
        });
        server_info();
    }
    function server_info() {
        showProgress();
        api.ajax({
            url : urladdress('/index/c2c/v1/act/server_info'),
            method : 'post',
            data : {
                values : {
                    username : get_userName(),
                    token : get_userToken(),
                    id : api.pageParam['id']
                }
            }
        }, function(ret, err) {
            if (ret) {
                if (ret.code == '0') {
                    var dats = ret.data;
                    for (var key in dats) {
                        if ($api.byId(key)) {
                            $api.html($api.byId(key), dats[key]);
                        }
                    }
                } else if (ret.code == '-1') {
                    logout();
                } else {
                    api.toast({
                        msg : ret.data
                    });
                }
            }
            hideProgress();
        });
    }

    function join() {
        showProgress();
        var mess = $api.val($api.byId('message'));
        api.ajax({
            url : urladdress('/index/c2c/v1/act/join_server'),
            method : 'post',
            data : {
                values : {
                    username : get_userName(),
                    token : get_userToken(),
                    id : api.pageParam['id'],
                    mess : mess
                }
            }
        }, function(ret, err) {
            hideProgress();
            if (ret) {
                if (ret.code == '0') {
                    api.sendEvent({
                        name : 'c2c'
                    });
                    alert(ret.data);
                    closepage();
                } else if (ret.code == '-1') {
                    logout();
                } else {
                    api.toast({
                        msg : ret.data
                    });
                }
            }
        });
    }
</script>
